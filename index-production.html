<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Happy Valentine's Day, My Love ‚ù§Ô∏è</title>
    <!-- Fonts & Icons (CDN) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;800&family=Nunito:wght@300;400;500;600&family=Dancing+Script:wght@500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ==================== BASE STYLES ==================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #ffd6e7 0%, #ffb8d9 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #333;
            overflow-x: hidden;
            padding: 20px;
            position: relative;
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* ==================== BACKGROUND EFFECTS ==================== */
        .background-petals {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .petal {
            position: absolute;
            background-color: rgba(255, 182, 193, 0.5);
            width: 15px;
            height: 15px;
            border-radius: 50% 0 50% 50%;
            transform: rotate(45deg);
            opacity: 0.5;
            filter: blur(0.5px);
            will-change: transform, opacity;
            animation: floatDown linear infinite;
        }

        @keyframes floatDown {
            0% { transform: translateY(-30px) rotate(0deg); opacity: 0; }
            10% { opacity: 0.5; }
            90% { opacity: 0.5; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        /* ==================== MAIN CONTAINER ==================== */
        .main-container {
            width: 100%;
            max-width: 1200px;
            min-height: 85vh;
            background: rgba(255, 255, 255, 0.96);
            border-radius: 32px;
            box-shadow: 0 24px 60px rgba(255, 105, 180, 0.22);
            position: relative;
            overflow: hidden;
            z-index: 2;
            display: flex;
            flex-direction: column;
            margin: 32px auto;
            transition: box-shadow 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ==================== HEADER ==================== */
        .site-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px 32px;
            border-bottom: 1px solid rgba(255, 182, 193, 0.25);
            background: rgba(255, 255, 255, 0.96);
            position: relative;
            z-index: 5;
            flex-wrap: wrap;
            gap: 16px;
        }

        .logo {
            font-family: 'Playfair Display', serif;
            font-weight: 800;
            font-size: 1.875rem;
            color: #ff6b9d;
            display: flex;
            align-items: center;
            gap: 12px;
            letter-spacing: -0.015em;
            line-height: 1.2;
        }

        .logo i { 
            font-size: 1.625rem;
            line-height: 1;
        }

        .nav-controls {
            display: flex;
            gap: 12px;
        }

        .nav-btn {
            background: linear-gradient(145deg, #ff9ebb, #ff6b9d);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 11px 22px;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            font-size: 0.9375rem;
            letter-spacing: 0.01em;
            line-height: 1.4;
            cursor: pointer;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 14px rgba(255, 71, 87, 0.28);
            display: flex;
            align-items: center;
            gap: 8px;
            will-change: transform;
        }

        .nav-btn:hover:not(.disabled) { 
            transform: translateY(-2px); 
            box-shadow: 0 6px 18px rgba(255, 71, 87, 0.38); 
        }
        
        .nav-btn:active:not(.disabled) { 
            transform: translateY(0) scale(0.98); 
            transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .nav-btn.disabled { 
            opacity: 0.5; 
            cursor: not-allowed; 
            transform: none !important; 
        }

        /* Page Indicator */
        .page-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9375rem;
            font-weight: 500;
            color: #777;
            background: rgba(255, 245, 249, 0.85);
            padding: 10px 18px;
            border-radius: 50px;
            margin-top: 12px;
            letter-spacing: 0.01em;
            line-height: 1.4;
        }

        .page-dot {
            width: 8px;
            height: 8px;
            background: #ddd;
            border-radius: 50%;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .page-dot.active { 
            background: #ff6b9d; 
            transform: scale(1.25); 
        }

        /* ==================== CONTENT AREA ==================== */
        .content-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 32px;
            position: relative;
            z-index: 3;
        }

        /* ==================== PAGES ==================== */
        .page {
            width: 100%;
            max-width: 900px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            position: absolute;
            top: 0;
            left: 0;
            transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1), 
                        transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 32px;
            transform: translateY(24px);
            will-change: opacity, transform;
        }

        .page.active {
            opacity: 1;
            pointer-events: all;
            position: relative;
            transform: translateY(0);
        }

        .page.exit {
            opacity: 0;
            transform: translateY(-24px);
        }

        /* ==================== TYPOGRAPHY ==================== */
        h1 {
            font-family: 'Playfair Display', serif;
            font-weight: 800;
            font-size: clamp(2.25rem, 5vw, 3.5rem);
            color: #2a1a1f;
            letter-spacing: -0.02em;
            margin-bottom: 24px;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0,0,0,0.04);
            line-height: 1.15;
        }

        h2 {
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            font-size: clamp(2rem, 4vw, 2.75rem);
            color: #2a1a1f;
            letter-spacing: -0.015em;
            margin-bottom: 28px;
            text-align: center;
            line-height: 1.2;
        }

        .subtitle {
            font-size: clamp(1.125rem, 2.5vw, 1.375rem);
            font-weight: 400;
            color: #5a4a4f;
            text-align: center;
            line-height: 1.65;
            letter-spacing: 0.005em;
            margin-bottom: 40px;
            max-width: 700px;
        }

        /* ==================== BUTTONS ==================== */
        .btn {
            background: linear-gradient(145deg, #ff4757, #ff3838);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 16px 42px;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            font-size: 1.125rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            line-height: 1.4;
            cursor: pointer;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 6px 20px rgba(255, 71, 87, 0.32);
            min-width: 160px;
            height: 52px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            will-change: transform;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.25), transparent);
            transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn:hover { 
            transform: scale(1.05) translateY(-1px); 
            box-shadow: 0 8px 24px rgba(255,71,87,0.42); 
        }
        
        .btn:hover::after { 
            left: 100%; 
        }
        
        .btn:active { 
            transform: scale(0.98); 
            transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .btn i { 
            margin-left: 10px; 
            font-size: 1rem; 
            line-height: 1;
        }

        .btn-small {
            padding: 11px 28px;
            font-size: 1rem;
            height: 46px;
            min-width: 140px;
        }

        /* ==================== LANDING PAGE ==================== */
        .landing-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 800px;
        }

        .bear-sticker {
            width: 160px;
            height: 160px;
            background: linear-gradient(145deg, #ffcce0, #ffb3d1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 40px;
            position: relative;
            box-shadow: 0 14px 35px rgba(0,0,0,0.12);
            animation: bounce 3.5s cubic-bezier(0.45, 0, 0.55, 1) infinite;
        }

        .bear-sticker::before {
            content: 'üêª';
            font-size: 72px;
            transform: scaleX(-1);
            line-height: 1;
        }

        .bear-sticker::after {
            content: 'üíó';
            position: absolute;
            font-size: 26px;
            top: -16px;
            line-height: 1;
            animation: floatHeart 2.5s cubic-bezier(0.45, 0, 0.55, 1) infinite;
        }

        @keyframes bounce { 
            0%, 100% { transform: translateY(0); } 
            50% { transform: translateY(-16px); } 
        }
        
        @keyframes floatHeart { 
            0%, 100% { transform: translateY(0) scale(1); } 
            50% { transform: translateY(-22px) scale(1.12); } 
        }

        .pulse { 
            animation: pulse 4.5s cubic-bezier(0.45, 0, 0.55, 1) infinite; 
        }
        
        @keyframes pulse { 
            0%, 100% { transform: scale(1); } 
            50% { transform: scale(1.08); } 
        }

        /* Love Counter */
        .love-counter {
            margin-top: 44px;
            font-size: 1.125rem;
            font-weight: 500;
            color: #777;
            background: rgba(255,245,249,0.85);
            padding: 13px 28px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.06);
            letter-spacing: 0.01em;
            line-height: 1.4;
        }

        .love-counter:hover {
            background: rgba(255,255,255,0.96);
            color: #ff6b9d;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
        }

        .love-counter i { 
            color: #ff6b9d;
            line-height: 1;
        }

        /* ==================== GIFTS PAGE ==================== */
        .gifts-container {
            display: flex;
            justify-content: center;
            gap: 28px;
            margin: 40px 0 56px;
            width: 100%;
            flex-wrap: wrap;
        }

        .gift-card {
            width: 220px;
            height: 200px;
            background: rgba(255,255,255,0.92);
            border-radius: 24px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            box-shadow: 0 10px 28px rgba(0,0,0,0.09);
            overflow: hidden;
            will-change: transform;
        }

        .gift-card:hover { 
            transform: translateY(-14px); 
            box-shadow: 0 20px 40px rgba(0,0,0,0.16); 
            background: rgba(255,255,255,0.96); 
        }
        
        .gift-card.active { 
            transform: translateY(-10px); 
            background: rgba(255,255,255,0.96); 
            box-shadow: 0 14px 35px rgba(255,105,180,0.28); 
        }

        .gift-icon { 
            font-size: 68px; 
            margin-bottom: 20px;
            line-height: 1;
        }
        
        .gift-card:nth-child(1) .gift-icon::before { content: 'üéÇ'; }
        .gift-card:nth-child(2) .gift-icon::before { content: 'üê∞'; }
        .gift-card:nth-child(3) .gift-icon::before { content: 'üêá'; }
        .gift-card:nth-child(4) .gift-icon::before { content: 'üéÆ'; }

        .gift-label { 
            font-weight: 600; 
            color: #5a4a4f; 
            font-size: 1.25rem;
            letter-spacing: 0.005em;
            line-height: 1.3;
        }

        .hearts-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .heart-particle {
            position: absolute;
            font-size: 16px;
            color: #ff6b9d;
            opacity: 0;
            line-height: 1;
            animation: heartFloat 3.2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
        }

        @keyframes heartFloat {
            0% { transform: translateY(0) scale(0); opacity: 0; }
            20% { opacity: 1; }
            80% { opacity: 1; }
            100% { transform: translateY(-100px) scale(1.3); opacity: 0; }
        }

        /* Games Hub */
        .games-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 28px;
            margin: 40px 0;
            width: 100%;
            max-width: 900px;
        }

        .game-card {
            background: rgba(255,255,255,0.92);
            border-radius: 24px;
            padding: 32px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 28px rgba(0,0,0,0.09);
            position: relative;
            overflow: hidden;
        }

        .game-card:hover {
            transform: translateY(-12px);
            box-shadow: 0 18px 38px rgba(0,0,0,0.15);
            background: rgba(255,255,255,0.96);
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, #ff6b9d, #ff8fab);
        }

        .game-icon {
            font-size: 64px;
            margin-bottom: 18px;
            line-height: 1;
        }

        .game-card h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.375rem;
            font-weight: 700;
            color: #2a1a1f;
            margin-bottom: 12px;
            letter-spacing: -0.01em;
            line-height: 1.3;
        }

        .game-card p {
            font-size: 1rem;
            font-weight: 400;
            color: #5a4a4f;
            line-height: 1.5;
        }

        /* ==================== GIFT 1 - POLAROIDS ==================== */
        .polaroid-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 36px;
            margin: 32px 0 48px;
            width: 100%;
            max-width: 900px;
        }

        .polaroid {
            background: white;
            padding: 18px;
            box-shadow: 0 12px 32px rgba(0,0,0,0.12);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            transform: rotate(var(--rotation, 0deg));
        }

        .polaroid:nth-child(odd) { --rotation: -2deg; }
        .polaroid:nth-child(even) { --rotation: 2deg; }

        .polaroid:hover {
            transform: rotate(0deg) scale(1.05) translateY(-8px);
            box-shadow: 0 20px 48px rgba(0,0,0,0.18);
        }

        .polaroid-image {
            width: 100%;
            height: 220px;
            object-fit: cover;
            border-radius: 4px;
            display: block;
        }

        .polaroid-caption {
            font-family: 'Dancing Script', cursive;
            font-weight: 600;
            font-size: 1.25rem;
            color: #333;
            text-align: center;
            margin-top: 14px;
            letter-spacing: 0.01em;
            line-height: 1.3;
        }

        .tape {
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 24px;
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid rgba(0, 0, 0, 0.08);
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.08);
        }

        /* ==================== GIFT 2 - QUIZ ==================== */
        .quiz-container {
            background: rgba(255,255,255,0.92);
            border-radius: 24px;
            padding: 36px;
            width: 100%;
            max-width: 700px;
            box-shadow: 0 12px 35px rgba(0,0,0,0.1);
            margin: 28px 0 40px;
        }

        .quiz-progress {
            display: flex;
            justify-content: space-between;
            margin-bottom: 32px;
            gap: 8px;
        }

        .progress-step {
            flex: 1;
            height: 6px;
            background: #ffe6f0;
            border-radius: 3px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .progress-step.active { 
            background: linear-gradient(90deg, #ff6b9d, #ff8fab); 
        }

        .quiz-question {
            font-size: clamp(1.25rem, 3vw, 1.5rem);
            font-weight: 600;
            color: #2a1a1f;
            text-align: center;
            margin-bottom: 32px;
            line-height: 1.4;
            letter-spacing: -0.01em;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 28px;
        }

        .quiz-option {
            background: #fff5f9;
            border: 2.5px solid #ffd6e7;
            border-radius: 16px;
            padding: 18px 24px;
            cursor: pointer;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 1.0625rem;
            font-weight: 500;
            color: #5a4a4f;
            text-align: center;
            letter-spacing: 0.005em;
            line-height: 1.4;
        }

        .quiz-option:hover {
            background: #ffebf3;
            border-color: #ff6b9d;
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(255, 107, 157, 0.15);
        }

        .quiz-option.selected {
            background: linear-gradient(145deg, #ff6b9d, #ff8fab);
            color: white;
            border-color: #ff6b9d;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 157, 0.25);
        }

        .quiz-result {
            text-align: center;
            padding: 24px;
        }

        .quiz-result h3 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.75rem, 4vw, 2.25rem);
            color: #ff6b9d;
            margin-bottom: 20px;
            letter-spacing: -0.015em;
            line-height: 1.2;
        }

        .quiz-result p {
            font-size: 1.125rem;
            font-weight: 400;
            color: #5a4a4f;
            line-height: 1.65;
            letter-spacing: 0.005em;
            margin-bottom: 12px;
        }

        /* ==================== GIFT 3 - BUNNIES ==================== */
        .bunnies-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 32px;
            margin: 36px 0 48px;
            width: 100%;
            max-width: 900px;
        }

        .bunny-card {
            background: rgba(255,255,255,0.92);
            border-radius: 24px;
            padding: 32px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .bunny-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 16px 40px rgba(0,0,0,0.15);
            background: rgba(255,255,255,0.96);
        }

        .bunny-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: linear-gradient(90deg, #ff6b9d, #ff8fab);
        }

        .bunny-emoji {
            font-size: 72px;
            margin-bottom: 20px;
            display: block;
            line-height: 1;
        }

        .bunny-card h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: #2a1a1f;
            margin-bottom: 16px;
            letter-spacing: -0.01em;
            line-height: 1.3;
        }

        .bunny-card p {
            font-size: 1.0625rem;
            font-weight: 400;
            color: #5a4a4f;
            line-height: 1.65;
            letter-spacing: 0.005em;
        }

        .love-letter {
            background: rgba(255,255,255,0.92);
            border-radius: 24px;
            padding: 40px;
            width: 100%;
            max-width: 700px;
            box-shadow: 0 12px 35px rgba(0,0,0,0.1);
            margin: 32px 0 40px;
            position: relative;
            border: 1px solid rgba(255,182,193,0.25);
        }

        .letter-header {
            font-family: 'Dancing Script', cursive;
            font-size: 2rem;
            font-weight: 700;
            color: #ff6b9d;
            text-align: center;
            margin-bottom: 28px;
            letter-spacing: 0.01em;
            line-height: 1.2;
        }

        .letter-body {
            font-size: 1.125rem;
            font-weight: 400;
            color: #5a4a4f;
            line-height: 1.75;
            letter-spacing: 0.005em;
            margin-bottom: 28px;
        }

        .letter-closing {
            font-family: 'Dancing Script', cursive;
            font-size: 1.5rem;
            font-weight: 600;
            color: #5a4a4f;
            text-align: right;
            margin-top: 28px;
            letter-spacing: 0.01em;
            line-height: 1.3;
        }

        .heart-stamp { 
            position: absolute; 
            bottom: 28px; 
            right: 28px; 
            width: 72px; 
            height: 72px; 
            color: #ff6b9d; 
            opacity: 0.65; 
            font-size: 52px; 
            transform: rotate(15deg);
            line-height: 1;
        }

        /* ==================== FINALLY PAGE ==================== */
        .video-frame {
            width: 280px;
            height: 400px;
            background: #000;
            border-radius: 22px;
            overflow: hidden;
            margin: 32px 0 40px;
            box-shadow: 0 16px 42px rgba(0,0,0,0.32);
            position: relative;
            border: 6px solid white;
        }

        .video-holder {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .video-player {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 16px;
            background: #000;
        }

        .video-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(145deg, #ff6b9d, #ff8fab);
            color: white;
            font-size: 24px;
            text-align: center;
            padding: 24px;
            border-radius: 16px;
        }

        .video-placeholder i { 
            font-size: 52px; 
            margin-bottom: 16px;
            line-height: 1;
        }
        
        .video-placeholder p { 
            font-size: 1rem; 
            font-weight: 500;
            margin-bottom: 10px;
            line-height: 1.4;
        }
        
        .video-instruction { 
            font-size: 0.8125rem !important; 
            opacity: 0.85; 
            font-style: italic;
            line-height: 1.4;
        }

        .final-message {
            font-size: 1.25rem;
            font-weight: 400;
            color: #5a4a4f;
            text-align: center;
            line-height: 1.75;
            letter-spacing: 0.005em;
            max-width: 700px;
            margin-bottom: 28px;
        }

        .signature { 
            font-size: 1rem; 
            font-weight: 400;
            color: #999; 
            margin-top: 20px; 
            text-align: center; 
            font-style: italic;
            line-height: 1.4;
        }

        /* ==================== SECRET PLACE ==================== */
        .secret-place-container {
            background: rgba(255,255,255,0.96);
            border-radius: 32px;
            padding: 56px;
            width: 700px;
            max-width: 90%;
            box-shadow: 0 24px 60px rgba(255,105,180,0.24);
            margin: 32px 0 44px;
            position: relative;
            z-index: 2;
            text-align: center;
            border: 1px solid rgba(255,182,193,0.25);
        }

        .secret-heart {
            width: 190px;
            height: 190px;
            background: linear-gradient(145deg, #ff6b9d, #ff8fab);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 44px;
            animation: secretPulse 2.5s cubic-bezier(0.45, 0, 0.55, 1) infinite;
        }

        .secret-heart i { 
            font-size: 85px; 
            color: white;
            line-height: 1;
        }

        @keyframes secretPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 12px 35px rgba(255,107,157,0.42); }
            50% { transform: scale(1.12); box-shadow: 0 16px 45px rgba(255,107,157,0.62); }
        }

        .secret-message {
            font-size: 1.5rem;
            font-weight: 400;
            color: #5a4a4f;
            line-height: 1.8;
            letter-spacing: 0.005em;
            margin-bottom: 44px;
            font-family: 'Playfair Display', serif;
            font-style: italic;
        }

        .secret-background-hearts {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .secret-heart-particle {
            position: absolute;
            font-size: 22px;
            color: #ff6b9d;
            opacity: 0.6;
            line-height: 1;
            animation: secretFloat 8.5s linear infinite;
        }

        @keyframes secretFloat {
            0% { transform: translateY(100vh) rotate(0deg) scale(0.5); opacity: 0; }
            10% { opacity: 0.6; }
            90% { opacity: 0.6; }
            100% { transform: translateY(-100px) rotate(360deg) scale(1); opacity: 0; }
        }

        #visit-secret-garden {
            background: linear-gradient(145deg, #4CAF50, #45a049);
            box-shadow: 0 6px 20px rgba(76,175,80,0.32);
        }
        
        #visit-secret-garden:hover {
            background: linear-gradient(145deg, #45a049, #3d8b40);
            box-shadow: 0 8px 24px rgba(76,175,80,0.42);
            transform: translateY(-2px) scale(1.05);
        }

        /* ==================== SOUND TOGGLE ==================== */
        .sound-toggle, .music-toggle {
            position: absolute;
            width: 48px;
            height: 48px;
            background: rgba(255,255,255,0.92);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            box-shadow: 0 4px 16px rgba(0,0,0,0.12);
            color: #ff6b9d;
            font-size: 1.25rem;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .sound-toggle { 
            bottom: 28px; 
            right: 28px; 
        }
        
        .music-toggle { 
            bottom: 88px; 
            right: 28px; 
            display: none; 
        }
        
        .sound-toggle:hover, .music-toggle:hover { 
            transform: scale(1.12); 
            background: rgba(255,255,255,1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.16);
        }
        
        .music-toggle.playing { 
            color: #4CAF50; 
            animation: musicPulse 2.2s infinite; 
        }
        
        @keyframes musicPulse { 
            0%, 100% { transform: scale(1); } 
            50% { transform: scale(1.12); } 
        }

        /* ==================== FOOTER ==================== */
        .site-footer {
            padding: 24px;
            text-align: center;
            color: #777;
            font-size: 0.9375rem;
            font-weight: 400;
            border-top: 1px solid rgba(255,182,193,0.25);
            background: rgba(255,255,255,0.96);
            width: 100%;
            line-height: 1.5;
        }

        /* ==================== MODAL ==================== */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.72);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }
        
        .modal.active { 
            opacity: 1; 
            pointer-events: all; 
        }
        
        .modal-content {
            background: white;
            border-radius: 28px;
            padding: 44px;
            max-width: 550px;
            width: 90%;
            text-align: center;
            position: relative;
            transform: translateY(24px);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 24px 60px rgba(0,0,0,0.28);
        }
        
        .modal.active .modal-content { 
            transform: translateY(0); 
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 38px;
            height: 38px;
            background: #ffebf3;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #ff6b9d;
            font-size: 20px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .close-modal:hover { 
            background: #ff6b9d; 
            color: white;
            transform: scale(1.1);
        }

        .modal-image {
            width: 100%;
            height: 260px;
            object-fit: cover;
            border-radius: 14px;
            margin: 28px 0;
        }

        /* ==================== EASTER EGG ==================== */
        .easter-egg {
            background: linear-gradient(145deg, #ff6b9d, #ff8fab);
            color: white;
            padding: 22px 38px;
            border-radius: 50px;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            z-index: 50;
            box-shadow: 0 16px 44px rgba(255,107,157,0.52);
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 600;
            text-align: center;
            font-size: 1.25rem;
            letter-spacing: 0.005em;
            line-height: 1.4;
            max-width: 80%;
        }
        
        .easter-egg.show { 
            transform: translate(-50%, -50%) scale(1); 
        }

        /* ==================== SPARKLES ==================== */
        .sparkle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: linear-gradient(145deg, #ff6b9d, #ffeb3b);
            border-radius: 50%;
            pointer-events: none;
            z-index: 10;
        }

        /* ==================== GAME STYLES ==================== */
        .game-page-container {
            width: 100%;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-bottom: 24px;
            background: rgba(255,255,255,0.85);
            padding: 16px 28px;
            border-radius: 16px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.06);
        }
        
        .game-stats { 
            font-size: 1.125rem; 
            font-weight: 600; 
            color: #5a4a4f;
            letter-spacing: 0.005em;
            line-height: 1.3;
        }
        
        .game-canvas-container {
            width: 100%;
            max-width: 800px;
            height: 400px;
            background: rgba(255,255,255,0.92);
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 28px;
            box-shadow: 0 8px 28px rgba(0,0,0,0.12);
            position: relative;
        }
        
        .game-canvas { 
            width: 100%; 
            height: 100%; 
            display: block; 
        }
        
        .game-controls {
            display: flex;
            gap: 16px;
            margin-top: 24px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Heart Catcher */
        #heart-catcher-canvas { 
            background: linear-gradient(145deg, #ffe6f0, #ffd6e7); 
        }

        /* Memory Match */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin: 24px 0;
            max-width: 520px;
        }
        
        .memory-card {
            width: 100%;
            aspect-ratio: 1;
            background: linear-gradient(145deg, #ff6b9d, #ff8fab);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 42px;
            color: white;
            transform-style: preserve-3d;
            transition: transform 0.65s cubic-bezier(0.4, 0, 0.2, 1);
            line-height: 1;
        }
        
        .memory-card.flipped { 
            transform: rotateY(180deg); 
            background: white; 
            color: #ff6b9d; 
        }
        
        .memory-card.matched { 
            background: #4CAF50; 
            color: white; 
            cursor: default; 
        }

        /* Love Quest */
        .story-container {
            background: white;
            border-radius: 22px;
            padding: 32px;
            width: 100%;
            max-width: 700px;
            box-shadow: 0 12px 35px rgba(0,0,0,0.12);
            margin: 24px 0;
        }
        
        .story-character { 
            font-size: 54px; 
            margin-bottom: 24px; 
            text-align: center;
            line-height: 1;
        }
        
        .story-text {
            font-size: 1.25rem;
            font-weight: 400;
            line-height: 1.65;
            letter-spacing: 0.005em;
            margin-bottom: 32px;
            min-height: 130px;
            color: #5a4a4f;
        }
        
        .story-choices { 
            display: flex; 
            flex-direction: column; 
            gap: 14px; 
        }
        
        .story-choice {
            background: #fff5f9;
            border: 2.5px solid #ffd6e7;
            border-radius: 50px;
            padding: 16px 28px;
            cursor: pointer;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 1.0625rem;
            font-weight: 500;
            color: #5a4a4f;
            text-align: left;
            letter-spacing: 0.005em;
            line-height: 1.4;
        }
        
        .story-choice:hover { 
            background: #ffebf3; 
            transform: translateX(6px);
            border-color: #ff6b9d;
            box-shadow: 0 4px 16px rgba(255, 107, 157, 0.15);
        }

        /* Rhythm Tap */
        .rhythm-lanes {
            display: flex;
            justify-content: space-around;
            width: 100%;
            height: 300px;
            position: relative;
            background: linear-gradient(145deg, #1a1a1a, #2a2a2a);
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 24px;
        }
        
        .rhythm-lane {
            width: 25%;
            height: 100%;
            border-right: 1px solid rgba(255,255,255,0.12);
            position: relative;
            cursor: pointer;
        }
        
        .rhythm-hit-line {
            position: absolute;
            bottom: 100px;
            width: 100%;
            height: 5px;
            background: #ff6b9d;
            box-shadow: 0 0 12px #ff6b9d;
        }
        
        .rhythm-heart {
            position: absolute;
            font-size: 32px;
            color: #ff6b9d;
            pointer-events: none;
            left: 50%;
            transform: translateX(-50%);
            line-height: 1;
        }

        /* Game Complete Modal */
        .game-complete {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 44px;
            border-radius: 28px;
            box-shadow: 0 24px 60px rgba(0,0,0,0.25);
            z-index: 100;
            text-align: center;
            max-width: 90%;
            width: 500px;
        }

        .game-complete h3 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.75rem, 4vw, 2.25rem);
            font-weight: 700;
            color: #ff6b9d;
            margin-bottom: 20px;
            letter-spacing: -0.015em;
            line-height: 1.2;
        }

        .game-complete p {
            font-size: 1.125rem;
            font-weight: 400;
            color: #5a4a4f;
            margin-bottom: 12px;
            line-height: 1.6;
            letter-spacing: 0.005em;
        }

        /* ==================== RESPONSIVE DESIGN ==================== */
        @media (max-width: 768px) {
            .site-header {
                padding: 20px 24px;
            }

            .logo {
                font-size: 1.625rem;
            }

            .nav-controls {
                width: 100%;
                justify-content: center;
            }

            .content-area {
                padding: 28px 20px;
            }

            h1 {
                font-size: 2.5rem;
                margin-bottom: 20px;
            }

            h2 {
                font-size: 2rem;
                margin-bottom: 24px;
            }

            .subtitle {
                font-size: 1.125rem;
            }

            .gifts-container {
                gap: 20px;
            }

            .gift-card {
                width: 180px;
                height: 180px;
            }

            .polaroid-grid {
                grid-template-columns: 1fr;
                gap: 24px;
            }

            .quiz-container,
            .love-letter,
            .secret-place-container {
                padding: 28px;
            }

            .bunnies-container {
                grid-template-columns: 1fr;
                gap: 24px;
            }

            .games-container {
                grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
                gap: 20px;
            }

            .memory-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 8px;
            }

            .game-canvas-container {
                height: 300px;
            }
        }

        @media (max-width: 480px) {
            .main-container {
                border-radius: 20px;
                margin: 16px auto;
            }

            .site-header {
                padding: 16px 20px;
            }

            .content-area {
                padding: 20px 16px;
            }

            .bear-sticker {
                width: 120px;
                height: 120px;
            }

            .bear-sticker::before {
                font-size: 56px;
            }

            .gift-card {
                width: 140px;
                height: 140px;
            }

            .gift-icon {
                font-size: 48px;
            }

            .btn {
                padding: 14px 32px;
                font-size: 1rem;
                height: 48px;
            }

            .game-canvas-container {
                height: 250px;
            }

            .sound-toggle, .music-toggle {
                width: 42px;
                height: 42px;
            }
        }

        /* ==================== ACCESSIBILITY ==================== */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Focus styles for keyboard navigation */
        *:focus-visible {
            outline: 3px solid #ff6b9d;
            outline-offset: 2px;
        }

        button:focus-visible,
        .btn:focus-visible,
        .nav-btn:focus-visible {
            outline: 3px solid #ff6b9d;
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <!-- Background Petals -->
    <div class="background-petals" aria-hidden="true"></div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Header -->
        <header class="site-header">
            <div class="logo">
                <i class="fas fa-heart"></i>
                <span>Our Love Story</span>
            </div>
            <nav class="nav-controls">
                <button id="prev-btn" class="nav-btn disabled" aria-label="Previous page">
                    <i class="fas fa-chevron-left"></i> Prev
                </button>
                <button id="next-btn" class="nav-btn" aria-label="Next page">
                    Next <i class="fas fa-chevron-right"></i>
                </button>
            </nav>
            <div class="page-indicator">
                <span id="page-num">Page 1 of 7</span>
                <div class="page-dot active"></div>
                <div class="page-dot"></div>
                <div class="page-dot"></div>
                <div class="page-dot"></div>
                <div class="page-dot"></div>
                <div class="page-dot"></div>
                <div class="page-dot"></div>
            </div>
        </header>

        <!-- Content Area -->
        <main class="content-area">
            <!-- Page 1: Landing -->
            <div id="landing-page" class="page active">
                <div class="landing-content">
                    <div class="bear-sticker pulse" aria-label="Teddy bear with heart"></div>
                    <h1>Happy Valentine's Day, My Love! üíñ</h1>
                    <p class="subtitle">
                        To the most amazing person in my life, you've turned every ordinary moment into a beautiful memory. This special day is for celebrating YOU and the incredible love we share. Get ready for a journey through our memories, a few surprises, and a whole lot of love!
                    </p>
                    <button class="btn" onclick="app.navigate('gifts-page')">
                        Let's Begin! <i class="fas fa-heart"></i>
                    </button>
                    <div class="love-counter" id="love-counter" role="button" tabindex="0" aria-label="Love counter, click to increase">
                        <i class="fas fa-heart"></i>
                        <span>Love Counter: <span id="love-count">‚àû</span></span>
                    </div>
                </div>
            </div>

            <!-- Page 2: Gifts -->
            <div id="gifts-page" class="page">
                <h1>Pick Your Gift! üéÅ</h1>
                <p class="subtitle">
                    I've prepared four special gifts just for you! Click on any gift to unwrap it and discover what's inside. Each one holds something special made with all my love.
                </p>
                <div class="gifts-container">
                    <div class="gift-card" data-gift="1" role="button" tabindex="0" aria-label="Gift 1: A Sweet Surprise">
                        <div class="hearts-particles" aria-hidden="true"></div>
                        <div class="gift-icon"></div>
                        <div class="gift-label">A Sweet Surprise</div>
                    </div>
                    <div class="gift-card" data-gift="2" role="button" tabindex="0" aria-label="Gift 2: How Well Do You Know Me?">
                        <div class="hearts-particles" aria-hidden="true"></div>
                        <div class="gift-icon"></div>
                        <div class="gift-label">How Well Do You Know Me?</div>
                    </div>
                    <div class="gift-card" data-gift="3" role="button" tabindex="0" aria-label="Gift 3: Our Little Bunnies">
                        <div class="hearts-particles" aria-hidden="true"></div>
                        <div class="gift-icon"></div>
                        <div class="gift-label">Our Little Bunnies</div>
                    </div>
                    <div class="gift-card" data-gift="4" role="button" tabindex="0" aria-label="Gift 4: Games Hub">
                        <div class="hearts-particles" aria-hidden="true"></div>
                        <div class="gift-icon"></div>
                        <div class="gift-label">Fun & Games</div>
                    </div>
                </div>
            </div>

            <!-- Gift 1: Polaroids -->
            <div id="gift1-page" class="page">
                <h2>Our Beautiful Moments üì∏</h2>
                <p class="subtitle">
                    Every picture tells a story, and these are our stories together. Click on any photo to see it bigger!
                </p>
                <div class="polaroid-grid" id="polaroid-grid"></div>
                <button class="btn btn-small" id="back-from-gift1">
                    <i class="fas fa-arrow-left"></i> Back to Gifts
                </button>
            </div>

            <!-- Gift 2: Quiz -->
            <div id="gift2-page" class="page">
                <h2>How Well Do You Know Me? üê∞</h2>
                <p class="subtitle">
                    Let's see how well you really know your bunny! Answer these questions about me.
                </p>
                <div class="quiz-container">
                    <div class="quiz-progress" id="quiz-progress"></div>
                    <div id="quiz-question" class="quiz-question"></div>
                    <div id="quiz-options" class="quiz-options"></div>
                    <button class="btn btn-small" id="next-question" style="display: none; margin: 0 auto;">Next</button>
                    <div id="quiz-result" class="quiz-result" style="display: none;">
                        <h3>Perfect Score! üéâ</h3>
                        <p>You got <span id="final-score">0</span>/3 correct!</p>
                        <p>You know me so well! üíï</p>
                    </div>
                </div>
                <button class="btn btn-small" id="back-from-gift2">
                    <i class="fas fa-arrow-left"></i> Back to Gifts
                </button>
            </div>

            <!-- Gift 3: Bunnies -->
            <div id="gift3-page" class="page">
                <h2>Our Little Bunny Family üêá</h2>
                <p class="subtitle">
                    Meet our adorable bunny family! Each one represents a special part of us.
                </p>
                <div class="bunnies-container">
                    <div class="bunny-card">
                        <span class="bunny-emoji">üê∞</span>
                        <h3>Papa Bunny</h3>
                        <p>Strong, protective, and always there to make you smile. That's me! üí™</p>
                    </div>
                    <div class="bunny-card">
                        <span class="bunny-emoji">üê∞</span>
                        <h3>Mama Bunny</h3>
                        <p>Sweet, caring, and absolutely adorable. That's you, my love! üíù</p>
                    </div>
                    <div class="bunny-card">
                        <span class="bunny-emoji">üêá</span>
                        <h3>Baby Bunny</h3>
                        <p>Our future little one, full of love and joy! üë∂‚ú®</p>
                    </div>
                </div>
                <div class="love-letter">
                    <div class="letter-header">To My Dearest Love</div>
                    <p class="letter-body">
                        Every day with you is like a beautiful dream come true. You make my heart skip a beat, my smile wider, and my life infinitely better. I can't imagine a world without you in it. Thank you for being my everything. I love you more than words can express! üíï
                    </p>
                    <div class="letter-closing">Forever Yours, Your Bunny üê∞</div>
                    <div class="heart-stamp">üíñ</div>
                </div>
                <button class="btn btn-small" id="back-from-gift3">
                    <i class="fas fa-arrow-left"></i> Back to Gifts
                </button>
            </div>

            <!-- Games Hub -->
            <div id="games-hub-page" class="page">
                <h2>Love Games! üéÆ</h2>
                <p class="subtitle">
                    Ready to have some fun? Choose a game and let's play together!
                </p>
                <div class="games-container">
                    <div class="game-card" data-game="1" role="button" tabindex="0" aria-label="Game 1: Heart Catcher">
                        <span class="game-icon">‚ù§Ô∏è</span>
                        <h3>Heart Catcher</h3>
                        <p>Catch falling hearts before they disappear!</p>
                    </div>
                    <div class="game-card" data-game="2" role="button" tabindex="0" aria-label="Game 2: Memory Match">
                        <span class="game-icon">üé¥</span>
                        <h3>Memory Match</h3>
                        <p>Find matching pairs of love emojis!</p>
                    </div>
                    <div class="game-card" data-game="3" role="button" tabindex="0" aria-label="Game 3: Love Quest">
                        <span class="game-icon">üåü</span>
                        <h3>Love Quest</h3>
                        <p>Choose your adventure in our love story!</p>
                    </div>
                    <div class="game-card" data-game="4" role="button" tabindex="0" aria-label="Game 4: Rhythm Hearts">
                        <span class="game-icon">üéµ</span>
                        <h3>Rhythm Hearts</h3>
                        <p>Tap hearts to the beat!</p>
                    </div>
                </div>
                <button class="btn btn-small" id="back-from-games">
                    <i class="fas fa-arrow-left"></i> Back to Gifts
                </button>
            </div>

            <!-- Game 1: Heart Catcher -->
            <div id="game1-heart-catcher-page" class="page">
                <div class="game-page-container">
                    <h2>Heart Catcher ‚ù§Ô∏è</h2>
                    <div class="game-header">
                        <div class="game-stats">Score: <span id="catcher-score">0</span></div>
                        <div class="game-stats">Lives: <span id="catcher-lives">3</span></div>
                        <div class="game-stats">Time: <span id="catcher-time">30</span>s</div>
                    </div>
                    <div class="game-canvas-container">
                        <canvas id="heart-catcher-canvas" class="game-canvas" aria-label="Heart catcher game canvas"></canvas>
                    </div>
                    <div class="game-controls">
                        <button class="btn btn-small" id="catcher-start">Start Game</button>
                        <button class="btn btn-small" id="back-from-game1"><i class="fas fa-arrow-left"></i> Back</button>
                    </div>
                </div>
                <div id="catcher-game-complete" class="game-complete" style="display: none;">
                    <h3>Game Over! üéâ</h3>
                    <p>Final Score: <span id="final-catcher-score">0</span></p>
                    <p>High Score: <span id="catcher-high-score">0</span></p>
                    <button class="btn btn-small" id="catcher-replay">Play Again</button>
                    <button class="btn btn-small" id="catcher-back-from-complete">Back to Games</button>
                </div>
            </div>

            <!-- Game 2: Memory Match -->
            <div id="game2-memory-match-page" class="page">
                <div class="game-page-container">
                    <h2>Memory Match üé¥</h2>
                    <div class="game-header">
                        <div class="game-stats">Moves: <span id="memory-moves">0</span></div>
                        <div class="game-stats">Matches: <span id="memory-matches">0</span>/8</div>
                    </div>
                    <div class="memory-grid" id="memory-grid"></div>
                    <div class="game-controls">
                        <button class="btn btn-small" id="memory-restart">Restart</button>
                        <button class="btn btn-small" id="back-from-game2"><i class="fas fa-arrow-left"></i> Back</button>
                    </div>
                </div>
                <div id="memory-game-complete" class="game-complete" style="display: none;">
                    <h3>You Did It! üéä</h3>
                    <p>Total Moves: <span id="final-memory-moves">0</span></p>
                    <p>Best: <span id="memory-best-score">‚àû</span> moves</p>
                    <button class="btn btn-small" id="memory-replay">Play Again</button>
                    <button class="btn btn-small" id="memory-back-from-complete">Back to Games</button>
                </div>
            </div>

            <!-- Game 3: Love Quest -->
            <div id="game3-love-quest-page" class="page">
                <div class="game-page-container">
                    <h2>Love Quest üåü</h2>
                    <div class="story-container">
                        <div class="story-character" id="quest-character">üê∞</div>
                        <div class="story-text" id="quest-text">Loading...</div>
                        <div class="story-choices" id="quest-choices"></div>
                    </div>
                    <button class="btn btn-small" id="back-from-game3"><i class="fas fa-arrow-left"></i> Back</button>
                </div>
                <div id="quest-game-complete" class="game-complete" style="display: none;">
                    <h3>The End! üíù</h3>
                    <p id="quest-ending-message">Congratulations on completing our love quest!</p>
                    <button class="btn btn-small" id="quest-replay">Play Again</button>
                    <button class="btn btn-small" id="quest-back-from-complete">Back to Games</button>
                </div>
            </div>

            <!-- Game 4: Rhythm Tap -->
            <div id="game4-rhythm-tap-page" class="page">
                <div class="game-page-container">
                    <h2>Rhythm Hearts üéµ</h2>
                    <div class="game-header">
                        <div class="game-stats">Score: <span id="rhythm-score">0</span></div>
                        <div class="game-stats">Combo: <span id="rhythm-combo">0</span>x</div>
                        <div class="game-stats">Accuracy: <span id="rhythm-accuracy">0</span>%</div>
                    </div>
                    <div class="rhythm-lanes" id="rhythm-lanes">
                        <div class="rhythm-lane" data-lane="0">
                            <div class="rhythm-hit-line"></div>
                        </div>
                        <div class="rhythm-lane" data-lane="1">
                            <div class="rhythm-hit-line"></div>
                        </div>
                        <div class="rhythm-lane" data-lane="2">
                            <div class="rhythm-hit-line"></div>
                        </div>
                        <div class="rhythm-lane" data-lane="3">
                            <div class="rhythm-hit-line"></div>
                        </div>
                    </div>
                    <div class="game-controls">
                        <button class="btn btn-small" id="rhythm-start">Start Game</button>
                        <button class="btn btn-small" id="back-from-game4"><i class="fas fa-arrow-left"></i> Back</button>
                    </div>
                </div>
                <div id="rhythm-game-complete" class="game-complete" style="display: none;">
                    <h3>Rhythm Complete! üé∂</h3>
                    <p>Rank: <span id="rhythm-rank">C</span></p>
                    <p>Final Score: <span id="final-rhythm-score">0</span></p>
                    <p>High Score: <span id="rhythm-high-score">0</span></p>
                    <button class="btn btn-small" id="rhythm-replay">Play Again</button>
                    <button class="btn btn-small" id="rhythm-back-from-complete">Back to Games</button>
                </div>
            </div>

            <!-- Page 6: Finally -->
            <div id="finally-page" class="page">
                <h1>And Finally... üíï</h1>
                <p class="subtitle">
                    I've saved the best for last! This is something super special, made just for you with all my heart.
                </p>
                <div class="video-frame">
                    <div class="video-holder">
                        <!-- Video placeholder (replace with actual video URL) -->
                        <div class="video-placeholder">
                            <i class="fas fa-video"></i>
                            <p>Your Special Video</p>
                            <p class="video-instruction">(Add your video URL in the HTML to play it here!)</p>
                        </div>
                        <!-- Uncomment and add video source
                        <video class="video-player" controls>
                            <source src="your-video-url.mp4" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                        -->
                    </div>
                </div>
                <p class="final-message">
                    Thank you for being the most wonderful person in my life. You make every day brighter, every moment sweeter, and every memory precious. I love you more than words could ever say! Happy Valentine's Day, my darling! üíñ
                </p>
                <button class="btn" id="go-to-secret">
                    There's One More Thing... <i class="fas fa-arrow-right"></i>
                </button>
                <button class="btn btn-small" id="download-btn" style="margin-top: 16px;">
                    <i class="fas fa-download"></i> Download Video
                </button>
                <button class="btn btn-small" id="back-from-finally" style="margin-top: 16px;">
                    <i class="fas fa-arrow-left"></i> Back to Gifts
                </button>
                <p class="signature">Made with üíñ just for you</p>
            </div>

            <!-- Page 7: Secret Place -->
            <div id="secret-place-page" class="page">
                <div class="secret-place-container">
                    <div class="secret-background-hearts" aria-hidden="true"></div>
                    <div class="secret-heart">
                        <i class="fas fa-infinity"></i>
                    </div>
                    <p class="secret-message">
                        "In your eyes, I've found my home. In your heart, I've found my love. In your soul, I've found my mate. With you, I am whole, full, alive."
                    </p>
                    <button class="btn" id="visit-secret-garden">
                        Visit Our Secret Garden üåπ
                    </button>
                    <button class="btn btn-small" id="back-from-secret" style="margin-top: 20px;">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="site-footer">
            <p>¬© 2025 ‚Ä¢ Made with endless love and devotion üíù ‚Ä¢ Forever and Always</p>
        </footer>
    </div>

    <!-- Sound Toggle -->
    <button class="sound-toggle" id="sound-toggle" aria-label="Toggle sound">
        <i class="fas fa-volume-up"></i>
    </button>

    <!-- Image Modal -->
    <div id="image-modal" class="modal">
        <div class="modal-content">
            <button class="close-modal" id="close-modal" aria-label="Close modal">
                <i class="fas fa-times"></i>
            </button>
            <h3 id="modal-title">Memory</h3>
            <img id="modal-image" src="" alt="" class="modal-image">
            <p id="modal-description"></p>
        </div>
    </div>

    <!-- Easter Egg -->
    <div id="easter-egg" class="easter-egg">
        üéâ You've discovered our secret! You clicked the counter 10 times! You're amazing! üíï
    </div>

    <script>
        'use strict';

        // ==================== APPLICATION STATE MANAGER ====================
        const AppStateManager = (() => {
            const state = {
                currentPage: 'landing-page',
                loveCounter: 0,
                soundEnabled: true,
                easterEggShown: false,
                pageHistory: ['landing-page']
            };

            const listeners = new Set();

            return {
                getState: () => ({ ...state }),
                
                setState: (updates) => {
                    Object.assign(state, updates);
                    listeners.forEach(listener => listener(state));
                },

                subscribe: (listener) => {
                    listeners.add(listener);
                    return () => listeners.delete(listener);
                },

                get currentPage() { return state.currentPage; },
                get loveCounter() { return state.loveCounter; },
                get soundEnabled() { return state.soundEnabled; },
                get easterEggShown() { return state.easterEggShown; }
            };
        })();

        // ==================== NAVIGATION MANAGER ====================
        const NavigationManager = (() => {
            const PAGE_ORDER = [
                'landing-page',
                'gifts-page',
                'gift1-page',
                'gift2-page',
                'gift3-page',
                'games-hub-page',
                'finally-page',
                'secret-place-page'
            ];

            const TRANSITION_DURATION = 500;

            const navigateTo = (pageId) => {
                try {
                    const currentPage = AppStateManager.currentPage;
                    const currentPageEl = document.getElementById(currentPage);
                    const nextPageEl = document.getElementById(pageId);

                    if (!nextPageEl || currentPageEl === nextPageEl) {
                        console.warn(`Invalid page navigation to: ${pageId}`);
                        return;
                    }

                    // Exit animation
                    currentPageEl.classList.add('exit');
                    
                    setTimeout(() => {
                        currentPageEl.classList.remove('active', 'exit');
                    }, TRANSITION_DURATION);

                    // Enter animation
                    setTimeout(() => {
                        nextPageEl.classList.add('active');
                        AppStateManager.setState({ currentPage: pageId });
                        updateNavigation();
                        AudioManager.play('pop');
                    }, TRANSITION_DURATION / 2);

                } catch (error) {
                    console.error('Navigation error:', error);
                }
            };

            const updateNavigation = () => {
                const currentPage = AppStateManager.currentPage;
                const currentIndex = PAGE_ORDER.indexOf(currentPage);
                
                const prevBtn = document.getElementById('prev-btn');
                const nextBtn = document.getElementById('next-btn');
                const pageNum = document.getElementById('page-num');
                const dots = document.querySelectorAll('.page-dot');

                if (prevBtn && nextBtn && pageNum) {
                    prevBtn.classList.toggle('disabled', currentIndex === 0);
                    nextBtn.classList.toggle('disabled', currentIndex === PAGE_ORDER.length - 1);
                    pageNum.textContent = `Page ${currentIndex + 1} of ${PAGE_ORDER.length}`;
                }

                dots.forEach((dot, i) => {
                    dot.classList.toggle('active', i === currentIndex);
                });
            };

            const navigateNext = () => {
                const currentIndex = PAGE_ORDER.indexOf(AppStateManager.currentPage);
                if (currentIndex < PAGE_ORDER.length - 1) {
                    navigateTo(PAGE_ORDER[currentIndex + 1]);
                }
            };

            const navigatePrev = () => {
                const currentIndex = PAGE_ORDER.indexOf(AppStateManager.currentPage);
                if (currentIndex > 0) {
                    navigateTo(PAGE_ORDER[currentIndex - 1]);
                }
            };

            return {
                navigateTo,
                navigateNext,
                navigatePrev,
                updateNavigation,
                PAGE_ORDER
            };
        })();

        // ==================== AUDIO MANAGER ====================
        const AudioManager = (() => {
            const SOUNDS = {
                pop: { freq: 1318.51, duration: 0.1, wave: 'sine' },
                click: { freq: 880, duration: 0.05, wave: 'square' },
                success: { freq: 1046.50, duration: 0.2, wave: 'sine' }
            };

            let audioContext = null;

            const initAudioContext = () => {
                if (!audioContext) {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                }
                return audioContext;
            };

            const play = (type) => {
                if (!AppStateManager.soundEnabled || !SOUNDS[type]) return;

                try {
                    const ctx = initAudioContext();
                    const { freq, duration, wave } = SOUNDS[type];
                    
                    const oscillator = ctx.createOscillator();
                    const gainNode = ctx.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(ctx.destination);
                    
                    oscillator.frequency.value = freq;
                    oscillator.type = wave;
                    
                    gainNode.gain.setValueAtTime(0.3, ctx.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + duration);
                    
                    oscillator.start(ctx.currentTime);
                    oscillator.stop(ctx.currentTime + duration);
                } catch (error) {
                    console.error('Audio playback error:', error);
                }
            };

            const toggleSound = () => {
                const newState = !AppStateManager.soundEnabled;
                AppStateManager.setState({ soundEnabled: newState });
                
                const icon = document.querySelector('#sound-toggle i');
                if (icon) {
                    icon.className = newState ? 'fas fa-volume-up' : 'fas fa-volume-mute';
                }
                
                play('click');
            };

            return { play, toggleSound };
        })();

        // ==================== EFFECTS MANAGER ====================
        const EffectsManager = (() => {
            const createPetals = () => {
                const container = document.querySelector('.background-petals');
                if (!container) return;

                for (let i = 0; i < 20; i++) {
                    const petal = document.createElement('div');
                    petal.className = 'petal';
                    petal.style.left = `${Math.random() * 100}%`;
                    petal.style.animationDuration = `${15 + Math.random() * 10}s`;
                    petal.style.animationDelay = `${Math.random() * 5}s`;
                    container.appendChild(petal);
                }
            };

            const createHeartParticles = () => {
                document.querySelectorAll('.hearts-particles').forEach(container => {
                    for (let i = 0; i < 5; i++) {
                        const heart = document.createElement('div');
                        heart.className = 'heart-particle';
                        heart.textContent = '‚ù§Ô∏è';
                        heart.style.left = `${Math.random() * 100}%`;
                        heart.style.animationDelay = `${Math.random() * 3}s`;
                        container.appendChild(heart);
                    }
                });
            };

            const createSecretHearts = () => {
                const container = document.querySelector('.secret-background-hearts');
                if (!container) return;

                for (let i = 0; i < 15; i++) {
                    const heart = document.createElement('div');
                    heart.className = 'secret-heart-particle';
                    heart.textContent = 'üíñ';
                    heart.style.left = `${Math.random() * 100}%`;
                    heart.style.animationDelay = `${Math.random() * 8}s`;
                    container.appendChild(heart);
                }
            };

            const createSparkleBurst = () => {
                const container = document.querySelector('.content-area');
                if (!container) return;

                const fragment = document.createDocumentFragment();
                
                for (let i = 0; i < 30; i++) {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'sparkle';
                    sparkle.style.left = `${Math.random() * 100}%`;
                    sparkle.style.top = `${Math.random() * 100}%`;
                    
                    const tx = Math.random() * 200 - 100;
                    const ty = Math.random() * 200 - 100;
                    const duration = 0.8 + Math.random() * 0.4;
                    
                    sparkle.style.animation = `sparkleAnim${i} ${duration}s ease-out forwards`;
                    
                    // Create unique keyframe
                    const style = document.createElement('style');
                    style.textContent = `
                        @keyframes sparkleAnim${i} {
                            0% { transform: translate(0, 0) scale(0); opacity: 0; }
                            50% { opacity: 1; }
                            100% { transform: translate(${tx}px, ${ty}px) scale(1); opacity: 0; }
                        }
                    `;
                    document.head.appendChild(style);
                    
                    fragment.appendChild(sparkle);
                    
                    setTimeout(() => {
                        sparkle.remove();
                        style.remove();
                    }, duration * 1000 + 100);
                }
                
                container.appendChild(fragment);
            };

            return {
                createPetals,
                createHeartParticles,
                createSecretHearts,
                createSparkleBurst
            };
        })();

        // ==================== POLAROID MANAGER ====================
        const PolaroidManager = (() => {
            const polaroids = [
                { image: 'https://via.placeholder.com/300x220/ffcce0/333?text=Our+First+Date', caption: 'Our First Date', emoji: 'üíï', taped: true },
                { image: 'https://via.placeholder.com/300x220/ffe6f0/333?text=That+Silly+Moment', caption: 'That Silly Moment', emoji: 'üòÇ', taped: false },
                { image: 'https://via.placeholder.com/300x220/ffd6e7/333?text=Sunset+Together', caption: 'Sunset Together', emoji: 'üåÖ', taped: true },
                { image: 'https://via.placeholder.com/300x220/ffb3d1/333?text=Coffee+Date', caption: 'Coffee Date', emoji: '‚òï', taped: false },
                { image: 'https://via.placeholder.com/300x220/ffcce0/333?text=Beach+Day', caption: 'Beach Day', emoji: 'üèñÔ∏è', taped: true },
                { image: 'https://via.placeholder.com/300x220/ffe6f0/333?text=Cozy+Night', caption: 'Cozy Night', emoji: 'üåô', taped: false }
            ];

            const createPolaroidGrid = () => {
                const grid = document.getElementById('polaroid-grid');
                if (!grid) return;

                const fragment = document.createDocumentFragment();

                polaroids.forEach((polaroid, index) => {
                    const polaroidEl = document.createElement('div');
                    polaroidEl.className = 'polaroid';
                    polaroidEl.setAttribute('role', 'button');
                    polaroidEl.setAttribute('tabindex', '0');
                    polaroidEl.setAttribute('aria-label', `View ${polaroid.caption}`);

                    if (polaroid.taped) {
                        const tape = document.createElement('div');
                        tape.className = 'tape';
                        tape.setAttribute('aria-hidden', 'true');
                        polaroidEl.appendChild(tape);
                    }

                    const img = document.createElement('img');
                    img.src = polaroid.image;
                    img.alt = polaroid.caption;
                    img.className = 'polaroid-image';
                    img.loading = 'lazy';

                    const caption = document.createElement('div');
                    caption.className = 'polaroid-caption';
                    caption.textContent = `${polaroid.caption} ${polaroid.emoji}`;

                    polaroidEl.appendChild(img);
                    polaroidEl.appendChild(caption);

                    polaroidEl.addEventListener('click', () => openModal(polaroid));
                    polaroidEl.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            openModal(polaroid);
                        }
                    });

                    fragment.appendChild(polaroidEl);
                });

                grid.appendChild(fragment);
            };

            const openModal = (polaroid) => {
                const modal = document.getElementById('image-modal');
                const modalTitle = document.getElementById('modal-title');
                const modalImage = document.getElementById('modal-image');
                const modalDescription = document.getElementById('modal-description');

                if (modal && modalTitle && modalImage && modalDescription) {
                    modalTitle.textContent = polaroid.caption;
                    modalImage.src = polaroid.image;
                    modalImage.alt = polaroid.caption;
                    modalDescription.textContent = `${polaroid.emoji} This is one of our precious memories together.`;
                    modal.classList.add('active');
                    AudioManager.play('pop');
                }
            };

            const closeModal = () => {
                const modal = document.getElementById('image-modal');
                if (modal) {
                    modal.classList.remove('active');
                }
            };

            return {
                createPolaroidGrid,
                openModal,
                closeModal
            };
        })();

        // ==================== QUIZ MANAGER ====================
        const QuizManager = (() => {
            const questions = [
                {
                    question: "What's my favorite food? üçï",
                    options: ["Sushi", "Tacos", "Pizza", "Burgers"],
                    correct: 2
                },
                {
                    question: "What do I love doing on weekends? üéÆ",
                    options: ["Hiking", "Gaming", "Shopping", "Reading"],
                    correct: 2
                },
                {
                    question: "What's my dream vacation spot? üèñÔ∏è",
                    options: ["Paris", "Tokyo", "Maldives", "New York"],
                    correct: 2
                }
            ];

            let currentQuestion = 0;
            let score = 0;
            let selectedOption = null;

            const init = () => {
                loadQuestion();
                setupEventListeners();
            };

            const loadQuestion = () => {
                if (currentQuestion >= questions.length) {
                    showResult();
                    return;
                }

                const q = questions[currentQuestion];
                const questionEl = document.getElementById('quiz-question');
                const optionsEl = document.getElementById('quiz-options');
                const nextBtn = document.getElementById('next-question');

                if (questionEl && optionsEl) {
                    questionEl.textContent = q.question;
                    optionsEl.innerHTML = '';

                    q.options.forEach((opt, idx) => {
                        const optEl = document.createElement('div');
                        optEl.className = 'quiz-option';
                        optEl.dataset.index = idx;
                        optEl.textContent = opt;
                        optEl.setAttribute('role', 'button');
                        optEl.setAttribute('tabindex', '0');
                        optionsEl.appendChild(optEl);
                    });

                    updateProgress();
                    if (nextBtn) nextBtn.style.display = 'none';
                    selectedOption = null;
                }
            };

            const updateProgress = () => {
                const progressEl = document.getElementById('quiz-progress');
                if (!progressEl) return;

                progressEl.innerHTML = '';
                for (let i = 0; i < questions.length; i++) {
                    const step = document.createElement('div');
                    step.className = 'progress-step';
                    if (i < currentQuestion) step.classList.add('active');
                    progressEl.appendChild(step);
                }
            };

            const setupEventListeners = () => {
                const optionsEl = document.getElementById('quiz-options');
                const nextBtn = document.getElementById('next-question');

                if (optionsEl) {
                    optionsEl.addEventListener('click', (e) => {
                        if (e.target.classList.contains('quiz-option')) {
                            document.querySelectorAll('.quiz-option').forEach(opt => {
                                opt.classList.remove('selected');
                            });
                            e.target.classList.add('selected');
                            selectedOption = parseInt(e.target.dataset.index);
                            if (nextBtn) nextBtn.style.display = 'block';
                            AudioManager.play('click');
                        }
                    });
                }

                if (nextBtn) {
                    nextBtn.addEventListener('click', nextQuestion);
                }
            };

            const nextQuestion = () => {
                if (selectedOption !== null) {
                    if (selectedOption === questions[currentQuestion].correct) {
                        score++;
                    }
                    currentQuestion++;
                    loadQuestion();
                    AudioManager.play('pop');
                }
            };

            const showResult = () => {
                const questionEl = document.getElementById('quiz-question');
                const optionsEl = document.getElementById('quiz-options');
                const nextBtn = document.getElementById('next-question');
                const resultEl = document.getElementById('quiz-result');
                const scoreEl = document.getElementById('final-score');

                if (questionEl) questionEl.style.display = 'none';
                if (optionsEl) optionsEl.style.display = 'none';
                if (nextBtn) nextBtn.style.display = 'none';
                if (resultEl) resultEl.style.display = 'block';
                if (scoreEl) scoreEl.textContent = score;

                EffectsManager.createSparkleBurst();
            };

            const reset = () => {
                currentQuestion = 0;
                score = 0;
                selectedOption = null;
                
                const questionEl = document.getElementById('quiz-question');
                const optionsEl = document.getElementById('quiz-options');
                const resultEl = document.getElementById('quiz-result');

                if (questionEl) questionEl.style.display = 'block';
                if (optionsEl) optionsEl.style.display = 'flex';
                if (resultEl) resultEl.style.display = 'none';

                init();
            };

            return { init, reset };
        })();

        // ==================== HEART CATCHER GAME ====================
        const HeartCatcherGame = (() => {
            let canvas, ctx;
            let state = {
                basket: { x: 0, y: 0, width: 80, height: 20, speed: 8 },
                hearts: [],
                score: 0,
                lives: 3,
                time: 30,
                gameRunning: false,
                keys: {},
                animationFrame: null,
                timerId: null,
                spawnIntervalId: null
            };

            const init = () => {
                canvas = document.getElementById('heart-catcher-canvas');
                if (!canvas) return;

                ctx = canvas.getContext('2d');
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;

                state.basket.x = canvas.width / 2 - 40;
                state.basket.y = canvas.height - 60;

                setupEventListeners();
            };

            const setupEventListeners = () => {
                document.addEventListener('keydown', (e) => {
                    state.keys[e.key] = true;
                });

                document.addEventListener('keyup', (e) => {
                    state.keys[e.key] = false;
                });

                canvas.addEventListener('click', (e) => {
                    if (!state.gameRunning) return;
                    const rect = canvas.getBoundingClientRect();
                    const clickX = e.clientX - rect.left;
                    const targetX = clickX - state.basket.width / 2;
                    state.basket.x = Math.max(0, Math.min(canvas.width - state.basket.width, targetX));
                });

                const startBtn = document.getElementById('catcher-start');
                const replayBtn = document.getElementById('catcher-replay');
                const backBtn = document.getElementById('catcher-back-from-complete');

                if (startBtn) startBtn.addEventListener('click', start);
                if (replayBtn) replayBtn.addEventListener('click', restart);
                if (backBtn) backBtn.addEventListener('click', () => {
                    NavigationManager.navigateTo('games-hub-page');
                });
            };

            const start = () => {
                if (state.gameRunning) return;

                state.score = 0;
                state.lives = 3;
                state.time = 30;
                state.hearts = [];
                state.gameRunning = true;

                updateDisplay();

                state.spawnIntervalId = setInterval(spawnHeart, 1000);
                state.animationFrame = requestAnimationFrame(gameLoop);

                state.timerId = setInterval(() => {
                    state.time--;
                    updateDisplay();
                    if (state.time <= 0 || state.lives <= 0) {
                        end();
                    }
                }, 1000);

                AudioManager.play('pop');
            };

            const restart = () => {
                const completeModal = document.getElementById('catcher-game-complete');
                if (completeModal) completeModal.style.display = 'none';
                start();
            };

            const spawnHeart = () => {
                if (!state.gameRunning) return;
                state.hearts.push({
                    x: Math.random() * (canvas.width - 30),
                    y: -30,
                    speed: 2 + Math.random() * 2,
                    caught: false
                });
            };

            const gameLoop = () => {
                if (!state.gameRunning) return;

                update();
                render();

                state.animationFrame = requestAnimationFrame(gameLoop);
            };

            const update = () => {
                // Update basket position
                if (state.keys['ArrowLeft']) {
                    state.basket.x = Math.max(0, state.basket.x - state.basket.speed);
                }
                if (state.keys['ArrowRight']) {
                    state.basket.x = Math.min(canvas.width - state.basket.width, state.basket.x + state.basket.speed);
                }

                // Update hearts
                state.hearts = state.hearts.filter(heart => {
                    if (heart.caught) return false;

                    heart.y += heart.speed;

                    // Check collision with basket
                    if (
                        heart.y + 30 >= state.basket.y &&
                        heart.y <= state.basket.y + state.basket.height &&
                        heart.x + 30 >= state.basket.x &&
                        heart.x <= state.basket.x + state.basket.width
                    ) {
                        state.score += 10;
                        updateDisplay();
                        AudioManager.play('success');
                        return false;
                    }

                    // Check if heart fell off screen
                    if (heart.y > canvas.height) {
                        state.lives--;
                        updateDisplay();
                        if (state.lives <= 0) {
                            end();
                        }
                        return false;
                    }

                    return true;
                });
            };

            const render = () => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Draw basket
                ctx.fillStyle = '#ff6b9d';
                ctx.fillRect(state.basket.x, state.basket.y, state.basket.width, state.basket.height);
                ctx.font = '24px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('üß∫', state.basket.x + state.basket.width / 2, state.basket.y + 16);

                // Draw hearts
                state.hearts.forEach(heart => {
                    ctx.font = '30px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText('‚ù§Ô∏è', heart.x + 15, heart.y + 25);
                });
            };

            const updateDisplay = () => {
                const scoreEl = document.getElementById('catcher-score');
                const livesEl = document.getElementById('catcher-lives');
                const timeEl = document.getElementById('catcher-time');

                if (scoreEl) scoreEl.textContent = state.score;
                if (livesEl) livesEl.textContent = state.lives;
                if (timeEl) timeEl.textContent = state.time;
            };

            const end = () => {
                state.gameRunning = false;

                if (state.animationFrame) {
                    cancelAnimationFrame(state.animationFrame);
                }
                if (state.timerId) {
                    clearInterval(state.timerId);
                }
                if (state.spawnIntervalId) {
                    clearInterval(state.spawnIntervalId);
                }

                const highScore = parseInt(localStorage.getItem('catcherHighScore') || '0');
                if (state.score > highScore) {
                    localStorage.setItem('catcherHighScore', state.score.toString());
                }

                const finalScoreEl = document.getElementById('final-catcher-score');
                const highScoreEl = document.getElementById('catcher-high-score');
                const completeModal = document.getElementById('catcher-game-complete');

                if (finalScoreEl) finalScoreEl.textContent = state.score;
                if (highScoreEl) highScoreEl.textContent = Math.max(state.score, highScore);
                if (completeModal) completeModal.style.display = 'flex';

                EffectsManager.createSparkleBurst();
            };

            return { init, start, restart };
        })();

        // ==================== MEMORY MATCH GAME ====================
        const MemoryMatchGame = (() => {
            const emojis = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíù', 'üíò', 'üíû', 'üíì'];
            let cards = [];
            let flippedCards = [];
            let matchedPairs = 0;
            let moves = 0;
            let isProcessing = false;

            const init = () => {
                setupGame();
                setupEventListeners();
            };

            const setupGame = () => {
                const grid = document.getElementById('memory-grid');
                if (!grid) return;

                // Create card pairs
                cards = [...emojis, ...emojis]
                    .map((emoji, index) => ({ emoji, id: index, matched: false, flipped: false }))
                    .sort(() => Math.random() - 0.5);

                grid.innerHTML = '';
                const fragment = document.createDocumentFragment();

                cards.forEach((card, index) => {
                    const cardEl = document.createElement('div');
                    cardEl.className = 'memory-card';
                    cardEl.dataset.index = index;
                    cardEl.textContent = '?';
                    cardEl.setAttribute('role', 'button');
                    cardEl.setAttribute('tabindex', '0');
                    cardEl.setAttribute('aria-label', `Memory card ${index + 1}`);
                    
                    cardEl.addEventListener('click', () => flipCard(index));
                    cardEl.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            flipCard(index);
                        }
                    });
                    
                    fragment.appendChild(cardEl);
                });

                grid.appendChild(fragment);

                moves = 0;
                matchedPairs = 0;
                flippedCards = [];
                updateDisplay();
            };

            const setupEventListeners = () => {
                const restartBtn = document.getElementById('memory-restart');
                const replayBtn = document.getElementById('memory-replay');
                const backBtn = document.getElementById('memory-back-from-complete');

                if (restartBtn) restartBtn.addEventListener('click', restart);
                if (replayBtn) replayBtn.addEventListener('click', restart);
                if (backBtn) backBtn.addEventListener('click', () => {
                    NavigationManager.navigateTo('games-hub-page');
                });
            };

            const flipCard = (index) => {
                if (isProcessing || cards[index].flipped || cards[index].matched || flippedCards.length >= 2) {
                    return;
                }

                const cardEl = document.querySelector(`.memory-card[data-index="${index}"]`);
                if (!cardEl) return;

                cards[index].flipped = true;
                cardEl.classList.add('flipped');
                cardEl.textContent = cards[index].emoji;
                flippedCards.push(index);
                AudioManager.play('click');

                if (flippedCards.length === 2) {
                    isProcessing = true;
                    moves++;
                    updateDisplay();
                    checkMatch();
                }
            };

            const checkMatch = () => {
                const [index1, index2] = flippedCards;
                const card1 = cards[index1];
                const card2 = cards[index2];

                const cardEl1 = document.querySelector(`.memory-card[data-index="${index1}"]`);
                const cardEl2 = document.querySelector(`.memory-card[data-index="${index2}"]`);

                if (card1.emoji === card2.emoji) {
                    // Match found
                    setTimeout(() => {
                        card1.matched = true;
                        card2.matched = true;
                        if (cardEl1) cardEl1.classList.add('matched');
                        if (cardEl2) cardEl2.classList.add('matched');
                        matchedPairs++;
                        updateDisplay();
                        flippedCards = [];
                        isProcessing = false;
                        AudioManager.play('success');

                        if (matchedPairs === emojis.length) {
                            endGame();
                        }
                    }, 500);
                } else {
                    // No match
                    setTimeout(() => {
                        card1.flipped = false;
                        card2.flipped = false;
                        if (cardEl1) {
                            cardEl1.classList.remove('flipped');
                            cardEl1.textContent = '?';
                        }
                        if (cardEl2) {
                            cardEl2.classList.remove('flipped');
                            cardEl2.textContent = '?';
                        }
                        flippedCards = [];
                        isProcessing = false;
                    }, 1000);
                }
            };

            const updateDisplay = () => {
                const movesEl = document.getElementById('memory-moves');
                const matchesEl = document.getElementById('memory-matches');

                if (movesEl) movesEl.textContent = moves;
                if (matchesEl) matchesEl.textContent = matchedPairs;
            };

            const endGame = () => {
                const bestScore = parseInt(localStorage.getItem('memoryBestMoves') || '999');
                if (moves < bestScore) {
                    localStorage.setItem('memoryBestMoves', moves.toString());
                }

                const finalMovesEl = document.getElementById('final-memory-moves');
                const bestScoreEl = document.getElementById('memory-best-score');
                const completeModal = document.getElementById('memory-game-complete');

                if (finalMovesEl) finalMovesEl.textContent = moves;
                if (bestScoreEl) bestScoreEl.textContent = bestScore === 999 ? moves : Math.min(moves, bestScore);
                if (completeModal) completeModal.style.display = 'flex';

                EffectsManager.createSparkleBurst();
            };

            const restart = () => {
                const completeModal = document.getElementById('memory-game-complete');
                if (completeModal) completeModal.style.display = 'none';
                setupGame();
            };

            return { init, restart };
        })();

        // ==================== LOVE QUEST GAME ====================
        const LoveQuestGame = (() => {
            const story = {
                start: {
                    character: 'üê∞',
                    text: "You wake up in a magical forest. The sun is shining, birds are singing, and you feel the warmth of love in the air. What do you do?",
                    choices: [
                        { text: "Follow the path of rose petals üåπ", next: 'rosePath' },
                        { text: "Listen to the singing birds üê¶", next: 'birdSong' }
                    ]
                },
                rosePath: {
                    character: 'üåπ',
                    text: "The rose petals lead you to a beautiful garden filled with blooming flowers. In the center, you find a locked treasure chest with a heart-shaped lock!",
                    choices: [
                        { text: "Search for the key üîë", next: 'findKey' },
                        { text: "Look around the garden üëÄ", next: 'gardenExplore' }
                    ]
                },
                birdSong: {
                    character: 'üê¶',
                    text: "The birds guide you to a sparkling stream. You see a message in a bottle floating towards you!",
                    choices: [
                        { text: "Open the bottle üíå", next: 'readMessage' },
                        { text: "Follow the stream üèûÔ∏è", next: 'streamPath' }
                    ]
                },
                findKey: {
                    character: 'üîë',
                    text: "You find a golden key hidden under a bush! You unlock the chest and inside is a beautiful love letter and a map to a secret place!",
                    choices: [
                        { text: "Read the letter üíï", next: 'ending1' }
                    ]
                },
                gardenExplore: {
                    character: 'ü¶ã',
                    text: "A magical butterfly appears and leads you to a secret spot where you find a picnic set up under a tree, with all your favorite treats!",
                    choices: [
                        { text: "Enjoy the picnic üß∫", next: 'ending2' }
                    ]
                },
                readMessage: {
                    character: 'üíå',
                    text: "The message says: 'Follow your heart, it knows the way.' You feel a warm glow and know exactly where to go!",
                    choices: [
                        { text: "Follow your heart ‚ù§Ô∏è", next: 'ending1' }
                    ]
                },
                streamPath: {
                    character: 'üèûÔ∏è',
                    text: "The stream leads you to a waterfall where you discover a hidden cave filled with glowing crystals that spell out 'I Love You'!",
                    choices: [
                        { text: "Admire the crystals üíé", next: 'ending3' }
                    ]
                },
                ending1: {
                    character: 'üíñ',
                    text: "The letter reads: 'To my dearest love, every moment with you is a treasure. You are my greatest adventure and my happiest ending. I love you infinitely!' ‚ú®",
                    choices: []
                },
                ending2: {
                    character: 'ü•∞',
                    text: "As you enjoy the picnic, you realize this is the perfect moment. Surrounded by nature and love, you feel truly blessed. This is where your heart belongs! üíù",
                    choices: []
                },
                ending3: {
                    character: '‚ú®',
                    text: "The crystals shimmer and dance with light, creating a magical display. You understand now that love is the most precious treasure of all! üíéüíï",
                    choices: []
                }
            };

            let currentNode = 'start';

            const init = () => {
                currentNode = 'start';
                loadStory();
            };

            const loadStory = () => {
                const node = story[currentNode];
                const characterEl = document.getElementById('quest-character');
                const textEl = document.getElementById('quest-text');
                const choicesEl = document.getElementById('quest-choices');

                if (characterEl) characterEl.textContent = node.character;
                if (textEl) textEl.textContent = node.text;

                if (choicesEl) {
                    choicesEl.innerHTML = '';

                    if (node.choices.length === 0) {
                        // Game ended
                        setTimeout(() => {
                            showEnding();
                        }, 1000);
                    } else {
                        node.choices.forEach((choice, index) => {
                            const choiceEl = document.createElement('div');
                            choiceEl.className = 'story-choice';
                            choiceEl.textContent = choice.text;
                            choiceEl.setAttribute('role', 'button');
                            choiceEl.setAttribute('tabindex', '0');
                            
                            const handleChoice = () => {
                                currentNode = choice.next;
                                loadStory();
                                AudioManager.play('pop');
                            };

                            choiceEl.addEventListener('click', handleChoice);
                            choiceEl.addEventListener('keydown', (e) => {
                                if (e.key === 'Enter' || e.key === ' ') {
                                    e.preventDefault();
                                    handleChoice();
                                }
                            });
                            
                            choicesEl.appendChild(choiceEl);
                        });
                    }
                }
            };

            const showEnding = () => {
                const messageEl = document.getElementById('quest-ending-message');
                const completeModal = document.getElementById('quest-game-complete');

                if (messageEl) messageEl.textContent = 'You completed the Love Quest! Every path led to love! üíï';
                if (completeModal) completeModal.style.display = 'flex';

                EffectsManager.createSparkleBurst();
            };

            const restart = () => {
                const completeModal = document.getElementById('quest-game-complete');
                if (completeModal) completeModal.style.display = 'none';
                init();
            };

            const setupEventListeners = () => {
                const replayBtn = document.getElementById('quest-replay');
                const backBtn = document.getElementById('quest-back-from-complete');

                if (replayBtn) replayBtn.addEventListener('click', restart);
                if (backBtn) backBtn.addEventListener('click', () => {
                    NavigationManager.navigateTo('games-hub-page');
                });
            };

            setupEventListeners();

            return { init, restart };
        })();

        // ==================== RHYTHM TAP GAME ====================
        const RhythmTapGame = (() => {
            const state = {
                gameRunning: false,
                score: 0,
                combo: 0,
                hits: 0,
                total: 0,
                accuracy: 0,
                hearts: [],
                lanes: [0, 1, 2, 3],
                gameDuration: 30000,
                animationFrame: null,
                spawnIntervalId: null,
                timeoutId: null
            };

            const init = () => {
                setupEventListeners();
            };

            const setupEventListeners = () => {
                const lanes = document.querySelectorAll('.rhythm-lane');
                lanes.forEach(lane => {
                    const laneNum = parseInt(lane.dataset.lane);
                    
                    const handleTap = (e) => {
                        if (!state.gameRunning) return;
                        const rect = lane.getBoundingClientRect();
                        const tapY = e.clientY - rect.top;
                        checkTap(laneNum, tapY);
                    };

                    lane.addEventListener('click', handleTap);
                    lane.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            handleTap({ clientY: rect.top + 100 });
                        }
                    });
                });

                const startBtn = document.getElementById('rhythm-start');
                const replayBtn = document.getElementById('rhythm-replay');
                const backBtn = document.getElementById('rhythm-back-from-complete');

                if (startBtn) startBtn.addEventListener('click', start);
                if (replayBtn) replayBtn.addEventListener('click', restart);
                if (backBtn) backBtn.addEventListener('click', () => {
                    NavigationManager.navigateTo('games-hub-page');
                });
            };

            const start = () => {
                if (state.gameRunning) return;

                state.score = 0;
                state.combo = 0;
                state.hits = 0;
                state.total = 0;
                state.accuracy = 0;
                state.hearts = [];
                state.gameRunning = true;

                updateDisplay();

                state.spawnIntervalId = setInterval(spawnHeart, 800);
                state.animationFrame = requestAnimationFrame(gameLoop);
                state.timeoutId = setTimeout(end, state.gameDuration);

                AudioManager.play('pop');
            };

            const restart = () => {
                const completeModal = document.getElementById('rhythm-game-complete');
                if (completeModal) completeModal.style.display = 'none';
                start();
            };

            const spawnHeart = () => {
                if (!state.gameRunning) return;

                const lane = state.lanes[Math.floor(Math.random() * state.lanes.length)];
                const speed = 2 + Math.random() * 2;
                const heart = { lane, y: 0, speed, hit: false, element: null };
                
                state.hearts.push(heart);
                state.total++;

                const laneEl = document.querySelector(`.rhythm-lane[data-lane="${lane}"]`);
                if (laneEl) {
                    const heartEl = document.createElement('div');
                    heartEl.className = 'rhythm-heart';
                    heartEl.style.bottom = '300px';
                    heartEl.textContent = '‚ù§';
                    laneEl.appendChild(heartEl);
                    heart.element = heartEl;
                }
            };

            const gameLoop = () => {
                if (!state.gameRunning) return;

                state.hearts = state.hearts.filter(heart => {
                    if (!heart.hit && heart.element) {
                        heart.y += heart.speed;
                        heart.element.style.bottom = `${300 - heart.y}px`;

                        if (heart.y > 200 && !heart.hit) {
                            heart.element.remove();
                            heart.hit = true;
                            state.combo = 0;
                            updateDisplay();
                            return false;
                        }
                    }
                    return !heart.hit || heart.y < 250;
                });

                state.animationFrame = requestAnimationFrame(gameLoop);
            };

            const checkTap = (laneNum, tapY) => {
                if (!state.gameRunning) return;

                let closest = null;
                let closestDist = Infinity;

                state.hearts.forEach(heart => {
                    if (heart.lane === laneNum && !heart.hit) {
                        const targetY = 100;
                        const dist = Math.abs(heart.y - targetY);
                        if (dist < closestDist && dist < 50) {
                            closestDist = dist;
                            closest = heart;
                        }
                    }
                });

                if (closest) {
                    closest.hit = true;
                    state.hits++;
                    if (closest.element) closest.element.remove();

                    let points = 0;
                    if (closestDist < 15) {
                        points = 100;
                        state.combo++;
                    } else if (closestDist < 30) {
                        points = 50;
                        state.combo++;
                    } else {
                        points = 10;
                        state.combo = 0;
                    }

                    state.score += points * (1 + state.combo * 0.1);
                    state.accuracy = state.total > 0 ? (state.hits / state.total) * 100 : 0;
                    updateDisplay();
                    createHitEffect(laneNum, tapY);
                    AudioManager.play('pop');
                } else {
                    state.combo = 0;
                    updateDisplay();
                }
            };

            const createHitEffect = (laneNum, y) => {
                const lane = document.querySelector(`.rhythm-lane[data-lane="${laneNum}"]`);
                if (!lane) return;

                const eff = document.createElement('div');
                eff.style.cssText = `position:absolute; left:50%; top:${y}px; transform:translate(-50%,-50%); font-size:30px; color:#ff6b9d; pointer-events:none; z-index:10;`;
                eff.textContent = state.combo > 5 ? 'PERFECT! üíñ' : 'GOOD! ‚ù§Ô∏è';

                // Create animation
                const animId = `hitAnim${Date.now()}`;
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes ${animId} {
                        0% { transform: translate(-50%,-50%) scale(0); opacity: 1; }
                        50% { transform: translate(-50%,-50%) scale(1.5); opacity: 0.7; }
                        100% { transform: translate(-50%,-50%) scale(1); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
                eff.style.animation = `${animId} 0.5s ease-out`;

                lane.appendChild(eff);

                setTimeout(() => {
                    if (eff.parentNode) eff.remove();
                    style.remove();
                }, 500);
            };

            const updateDisplay = () => {
                const scoreEl = document.getElementById('rhythm-score');
                const comboEl = document.getElementById('rhythm-combo');
                const accuracyEl = document.getElementById('rhythm-accuracy');

                if (scoreEl) scoreEl.textContent = Math.round(state.score);
                if (comboEl) comboEl.textContent = state.combo;
                if (accuracyEl) accuracyEl.textContent = Math.round(state.accuracy);
            };

            const end = () => {
                state.gameRunning = false;

                if (state.animationFrame) {
                    cancelAnimationFrame(state.animationFrame);
                }
                if (state.spawnIntervalId) {
                    clearInterval(state.spawnIntervalId);
                }
                if (state.timeoutId) {
                    clearTimeout(state.timeoutId);
                }

                // Clear remaining hearts
                document.querySelectorAll('.rhythm-heart').forEach(h => h.remove());

                let rank = 'C';
                if (state.score > 5000) rank = 'S';
                else if (state.score > 3000) rank = 'A';
                else if (state.score > 1500) rank = 'B';

                const highScore = parseInt(localStorage.getItem('rhythmHighScore') || '0');
                if (state.score > highScore) {
                    localStorage.setItem('rhythmHighScore', Math.round(state.score).toString());
                }

                const rankEl = document.getElementById('rhythm-rank');
                const finalScoreEl = document.getElementById('final-rhythm-score');
                const highScoreEl = document.getElementById('rhythm-high-score');
                const completeModal = document.getElementById('rhythm-game-complete');

                if (rankEl) rankEl.textContent = rank;
                if (finalScoreEl) finalScoreEl.textContent = Math.round(state.score);
                if (highScoreEl) highScoreEl.textContent = Math.max(Math.round(state.score), highScore);
                if (completeModal) completeModal.style.display = 'flex';

                EffectsManager.createSparkleBurst();
            };

            return { init, start, restart };
        })();

        // ==================== MAIN APPLICATION ====================
        const Application = (() => {
            const init = () => {
                try {
                    // Initialize effects
                    EffectsManager.createPetals();
                    EffectsManager.createHeartParticles();
                    EffectsManager.createSecretHearts();

                    // Initialize content
                    PolaroidManager.createPolaroidGrid();
                    QuizManager.init();

                    // Initialize games
                    HeartCatcherGame.init();
                    MemoryMatchGame.init();
                    LoveQuestGame.init();
                    RhythmTapGame.init();

                    // Setup navigation
                    NavigationManager.updateNavigation();
                    setupEventListeners();

                    console.log('Application initialized successfully');
                } catch (error) {
                    console.error('Application initialization error:', error);
                }
            };

            const setupEventListeners = () => {
                // Navigation buttons
                const prevBtn = document.getElementById('prev-btn');
                const nextBtn = document.getElementById('next-btn');

                if (prevBtn) prevBtn.addEventListener('click', NavigationManager.navigatePrev);
                if (nextBtn) nextBtn.addEventListener('click', NavigationManager.navigateNext);

                // Love counter
                const loveCounter = document.getElementById('love-counter');
                if (loveCounter) {
                    const handleCounterClick = () => {
                        const newCount = AppStateManager.loveCounter + 1;
                        AppStateManager.setState({ loveCounter: newCount });
                        
                        const countEl = document.getElementById('love-count');
                        if (countEl) {
                            countEl.textContent = newCount === 0 ? '‚àû' : newCount;
                        }

                        EffectsManager.createSparkleBurst();
                        AudioManager.play('success');

                        if (newCount === 10 && !AppStateManager.easterEggShown) {
                            const easter = document.getElementById('easter-egg');
                            if (easter) {
                                easter.classList.add('show');
                                setTimeout(() => easter.classList.remove('show'), 3000);
                                AppStateManager.setState({ easterEggShown: true });
                            }
                        }
                    };

                    loveCounter.addEventListener('click', handleCounterClick);
                    loveCounter.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            handleCounterClick();
                        }
                    });
                }

                // Gift cards
                document.querySelectorAll('.gift-card').forEach(card => {
                    const gift = card.dataset.gift;
                    const handleGiftClick = () => {
                        if (gift === '1') NavigationManager.navigateTo('gift1-page');
                        else if (gift === '2') NavigationManager.navigateTo('gift2-page');
                        else if (gift === '3') NavigationManager.navigateTo('gift3-page');
                        else if (gift === '4') NavigationManager.navigateTo('games-hub-page');
                    };

                    card.addEventListener('click', handleGiftClick);
                    card.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            handleGiftClick();
                        }
                    });
                });

                // Game cards
                document.querySelectorAll('.game-card').forEach(card => {
                    const game = card.dataset.game;
                    const handleGameClick = () => {
                        if (game === '1') NavigationManager.navigateTo('game1-heart-catcher-page');
                        else if (game === '2') NavigationManager.navigateTo('game2-memory-match-page');
                        else if (game === '3') NavigationManager.navigateTo('game3-love-quest-page');
                        else if (game === '4') NavigationManager.navigateTo('game4-rhythm-tap-page');
                    };

                    card.addEventListener('click', handleGameClick);
                    card.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            handleGameClick();
                        }
                    });
                });

                // Back buttons
                const backButtons = {
                    'back-from-gift1': 'gifts-page',
                    'back-from-gift2': 'gifts-page',
                    'back-from-gift3': 'gifts-page',
                    'back-from-games': 'gifts-page',
                    'back-from-game1': 'games-hub-page',
                    'back-from-game2': 'games-hub-page',
                    'back-from-game3': 'games-hub-page',
                    'back-from-game4': 'games-hub-page',
                    'back-from-finally': 'gifts-page',
                    'back-from-secret': 'finally-page'
                };

                Object.entries(backButtons).forEach(([btnId, targetPage]) => {
                    const btn = document.getElementById(btnId);
                    if (btn) {
                        btn.addEventListener('click', () => NavigationManager.navigateTo(targetPage));
                    }
                });

                // Special buttons
                const goToSecretBtn = document.getElementById('go-to-secret');
                const visitGardenBtn = document.getElementById('visit-secret-garden');
                const downloadBtn = document.getElementById('download-btn');
                const soundToggleBtn = document.getElementById('sound-toggle');
                const closeModalBtn = document.getElementById('close-modal');

                if (goToSecretBtn) {
                    goToSecretBtn.addEventListener('click', () => {
                        NavigationManager.navigateTo('secret-place-page');
                    });
                }

                if (visitGardenBtn) {
                    visitGardenBtn.addEventListener('click', () => {
                        window.open('https://www.youtube.com/watch?v=dQw4w9WgXcQ', '_blank');
                        AudioManager.play('pop');
                    });
                }

                if (downloadBtn) {
                    downloadBtn.addEventListener('click', () => {
                        alert('Video download feature: Add your video URL in the HTML!');
                        AudioManager.play('click');
                    });
                }

                if (soundToggleBtn) {
                    soundToggleBtn.addEventListener('click', AudioManager.toggleSound);
                }

                if (closeModalBtn) {
                    closeModalBtn.addEventListener('click', PolaroidManager.closeModal);
                }

                // Close modal on background click
                const modal = document.getElementById('image-modal');
                if (modal) {
                    modal.addEventListener('click', (e) => {
                        if (e.target === modal) {
                            PolaroidManager.closeModal();
                        }
                    });
                }

                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        PolaroidManager.closeModal();
                    }
                });
            };

            return {
                init,
                navigate: NavigationManager.navigateTo,
                state: AppStateManager
            };
        })();

        // Initialize application when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', Application.init);
        } else {
            Application.init();
        }

        // Expose app to global scope for inline onclick handlers (backwards compatibility)
        window.app = Application;
    </script>
</body>
</html>
